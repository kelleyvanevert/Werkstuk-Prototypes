\documentclass
  [11pt,
   paper=a4,
   cleardouble=plain,
   chapterprefix=true,
   parskip=half-,
   draft=true]
  {scrbook}

\usepackage[dutch]{babel}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{marvosym}

\usepackage{pxfonts}

\usepackage{subfig}

\usepackage{tikz}

\usepackage{listings}
\lstdefinelanguage{proto}
  {keywords={var, obj, clones, fun, print, if, else, while, then, do, skip, and, or, not, returns, fi, od},
   emph={true,false,this,proto},
   comment=[l]{\#}}
\lstdefinelanguage{class}[]{proto}
  {morekeywords={extends},
   deletekeywords={clones},
   moreemph={super},
   deleteemph={proto}}
\lstnewenvironment{program}{}{}
\lstMakeShortInline !
\lstset
  {language=proto,
   basicstyle=\small\ttfamily,
   emphstyle=\scshape,
   commentstyle=\small\color{green!40!black},
   numbers=left,
   numberstyle=\small\color{black!70},
   numbersep=1pc,
   extendedchars=true,
   mathescape=true%,
   %escapebegin=\ ,
   %escapeend=\ 
}

\usepackage[nounderscore]{syntax}
\setlength{\grammarindent}{8em}
\renewcommand{\syntleft}{\normalfont\itshape}
\renewcommand{\syntright}{}

\frenchspacing% Cruciaal!

% Grammar stuff:
\newcommand{\NT}[1]{\ensuremath{\mathit{#1}}} % non-terminals
\newcommand{\C}[1]{\lstinline!#1!} % code (syntax highlighted by listings)
\newcommand{\GrammarRule}[2]{#2}
\newcommand{\Alt}{|$\;$}
\newcommand{\Rdef}{$\buildrel{\text{R}}\over{::=}$} % regex definition

\begin{document}

\begin{tabular}{@{}r@{ }l@{}}
	\NT{Statement} ::= & \NT{Statement}$_1$; \NT{Statement}$_2$ \\
	\Alt & !skip! \\
	\Alt & !while! \NT{BooleanExpression}$_1$ !do! \NT{Statement}$_2$ !od! \\
	\Alt & !if! \NT{BooleanExpression} !then! \NT{Statement}$_1$
	   [!else! \NT{Statement}$_2$] !fi! \\
	\Alt & !var! \NT{Slot} \\
	\Alt & \NT{Slot} = \NT{Expression} \\
	\Alt & [\NT{Slot}$_1$ =] \NT{Slot}$_2$(\NT{Expressions}) \\
	\Alt & !fun! \NT{Slot} (\NT{Identifiers})
	   [!returns! \NT{Slot}] (\NT{Statement}) \\
	\Alt & !obj! \NT{Identifier} [!clones! \NT{Slot}] \\
	\NT{Identifier} \Rdef & \verb/[a-zA-Z_]+/ \\
	\NT{Identifiers} \Rdef & \verb/(/\NT{Identifier}\verb/(, /\NT{Identifier}\verb/)*)?/ \\
	\NT{Slot} ::= & \NT{Identifier} \Alt \NT{Slot}.\NT{Identifier} \\
	\NT{Number} \Rdef & \verb/[0-9]+/ \\
	\NT{Operator} ::= & $+$ \Alt $-$ \Alt $\times$ \\
	\NT{Expression} ::= & \NT{Number} \\
	\Alt & \NT{Slot} \\
	\Alt & \NT{Expression}$_1$ \NT{Operator} \NT{Expression}$_2$ \\
	\NT{Expressions} \Rdef & \verb/(/\NT{Expression}\verb/(, /\NT{Expression}\verb/)*)?/ \\
	\NT{Boolean} ::= & !true! \Alt !false! \\
	\NT{BooleanExpression} ::= & \NT{Boolean} \\
	\Alt & \NT{BooleanExpression}$_1$ !and! \NT{BooleanExpression}$_2$ \\
	\Alt & \NT{BooleanExpression}$_1$ !or! \NT{BooleanExpression}$_2$ \\
	\Alt & !not! \NT{BooleanExpression} \\
	\Alt & \NT{Expression}$_1$ \NT{Relation} \NT{Expression}$_2$ \\
	\NT{Relation} ::= & $<$ \Alt $\le$ \Alt $>$ \Alt $\ge$ \Alt $\neq$ \Alt $=$
\end{tabular}

\end{document}

% vim: spell spl=nl
